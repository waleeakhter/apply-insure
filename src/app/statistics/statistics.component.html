<!-- Sidebar navigation -->
<mdb-side-nav #sidenav [fixed]="true">
  <links>
    <!-- Side navigation links -->
    <mdb-navbar-brand>
      <li>
        <div class="logo-wrapper waves-light" style="margin-top: 150px !important;">
          <h3 class="font-weight-bold text-dark" style="padding-left: 20px !important;">Groups</h3>
        </div>
      </li>
      <!--/. Logo -->
    </mdb-navbar-brand>
    <li>
      <ul class="collapsible collapsible-accordion">
        <mdb-accordion [multiple]="false" aria-multiselectable="false">
          <!-- Simple link -->
          <mdb-accordion-item class="no-collase" (click)="getStatistics(-1); group_title='All';">
            <mdb-accordion-item-head mdbWavesEffect class="text-dark">
              <span class="text-dark font-weight-bolder" style="font-size: 1rem">
              All</span>
            </mdb-accordion-item-head>
            <mdb-accordion-item-body></mdb-accordion-item-body>
          </mdb-accordion-item>
          <mdb-accordion-item class="no-collase" *ngFor="let data of groups"
                              (click)="getStatistics(data._id);group_title=data.name">
            <mdb-accordion-item-head mdbWavesEffect>
              <span class="text-dark font-weight-bolder" style="font-size: 1rem">
                {{data.name}}</span>
            </mdb-accordion-item-head>
            <mdb-accordion-item-body></mdb-accordion-item-body>
          </mdb-accordion-item>
        </mdb-accordion>

      </ul>
    </li>
    <!--/. Side navigation links -->
  </links>
  <div class="sidenav-bg mask-strong"></div>
</mdb-side-nav>
  <div class="content col-md-9 offset-md-1">
    <h1 class="font-weight-bolder h1-responsive" style="margin-top: 50px; margin-bottom: 50px;">
      <img [src]="'./uploads/'+loggedUserData['profilePic']" height="70"
           style="margin-left: 30px;margin-right: 30px;"/>{{loggedUserData['label']}}</h1>
    <div class="row" style="padding-top: 25px; padding-bottom: 25px;">
      <div class="col-md-6">
        <mdb-select [options]="optionsSelect" [multiple]="true" [visibleOptions]="13" [(ngModel)]="selectValue"
                    [highlightFirst]="false"
                    placeholder="Choose your option"></mdb-select>
      </div>
    </div>
    <mdb-card cascade="true" narrower="true">
      <!--Card image-->
      <!--<div-->
      <!--class="view view-cascade gradient-card-header blue-gradient narrower py-2 mx-4 mb-3 d-flex justify-content-between align-items-center">-->

      <!--<a href="javascript:void(0);" class="white-text mx-3 text-center">{{group_title}}</a>-->
      <!--</div>-->
      <!--/Card image-->

      <div class="px-4">

        <div class="table-responsive">
          <!--Table-->
          <table class="mb-0 table" mdbTable hover="true">

            <!--Table head-->
            <thead>
            <tr>
              <th [width]="(100/(selectValue.length+1)-2)+'%'">
                <a>No</a>
              </th>
              <th [width]="(100/(selectValue.length+1)-2)+'%'" *ngIf="selectValue.indexOf('link')>-1">
                <a (click)="sortBy('link')">
                  Link
                  <mdb-icon fas icon="sort" class="ml-1"></mdb-icon>
                </a>
              </th>
              <th [width]="(100/(selectValue.length+1)-2)+'%'" *ngIf="selectValue.indexOf('label')>-1">
                <a (click)="sortBy('label')">
                  Label
                  <mdb-icon fas icon="sort" class="ml-1"></mdb-icon>
                </a>
              </th>

              <th [width]="(100/(selectValue.length+1)+0.5)+'%'" *ngIf="selectValue.indexOf('is1daysum')>-1">
                <a (click)="sortBy('count1')">1 day sum
                  <mdb-icon fas icon="sort" class="ml-1"></mdb-icon>
                </a>
              </th>

              <th [width]="(100/(selectValue.length+1)+0.5)+'%'" *ngIf="selectValue.indexOf('is1dayavg')>-1">
                <a (click)="sortBy('count1')">1 day avg
                  <mdb-icon fas icon="sort" class="ml-1"></mdb-icon>
                </a>
              </th>
              <th [width]="(100/(selectValue.length+1)+0.5)+'%'" *ngIf="selectValue.indexOf('is7daysum')>-1">
                <a (click)="sortBy('count7')">7 day sum
                  <mdb-icon fas icon="sort" class="ml-1"></mdb-icon>
                </a>
              </th>

              <th [width]="(100/(selectValue.length+1)+0.5)+'%'" *ngIf="selectValue.indexOf('is7dayavg')>-1">
                <a (click)="sortBy('count7')">7 day avg
                  <mdb-icon fas icon="sort" class="ml-1"></mdb-icon>
                </a>
              </th>

              <th [width]="(100/(selectValue.length+1)+0.5)+'%'" *ngIf="selectValue.indexOf('is30daysum')>-1">
                <a (click)="sortBy('count30')">30 day sum<mdb-icon fas icon="sort" class="ml-1"></mdb-icon>
                </a>
              </th>

              <th [width]="(100/(selectValue.length+1)+0.5)+'%'" *ngIf="selectValue.indexOf('is30dayavg')>-1">
                <a (click)="sortBy('count30')">30 day avg
                  <mdb-icon fas icon="sort" class="ml-1"></mdb-icon>
                </a>
              </th>

              <th [width]="(100/(selectValue.length+1)+0.5)+'%'" *ngIf="selectValue.indexOf('is90daysum')>-1">
                <a (click)="sortBy('count90')">90 day sum
                  <mdb-icon fas icon="sort" class="ml-1"></mdb-icon>
                </a>
              </th>

              <th [width]="(100/(selectValue.length+1)+0.5)+'%'" *ngIf="selectValue.indexOf('is90dayavg')>-1">
                <a (click)="sortBy('count90')">90 day avg
                  <mdb-icon fas icon="sort" class="ml-1"></mdb-icon>
                </a>
              </th>

              <th [width]="(100/(selectValue.length+1))+'%'" *ngIf="selectValue.indexOf('isytdsum')>-1">
                <a (click)="sortBy('countYTD')">ytd sum
                  <mdb-icon fas icon="sort" class="ml-1"></mdb-icon>
                </a>
              </th>

              <th [width]="(100/(selectValue.length+1))+'%'" *ngIf="selectValue.indexOf('isytdavg')>-1">
                <a (click)="sortBy('countYTD')">ytd avg
                  <mdb-icon fas icon="sort" class="ml-1"></mdb-icon>
                </a>
              </th>
            </thead>
            <!--Table head-->
            <!--Table body-->
            <tbody>
            <tr *ngFor="let row of data;let i = index">
              <td>{{i + 1}}</td>
              <td *ngIf="selectValue.indexOf('link')>-1">{{row['link']}}</td>
              <td *ngIf="selectValue.indexOf('label')>-1">{{row['label']}}</td>
              <td *ngIf="selectValue.indexOf('is1daysum')>-1">{{row['count1']}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{row['countC1']}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is1dayavg')>-1">{{row['count1'] / 1}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{row['countC1'] / 1}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is7daysum')>-1">{{row['count7']}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{row['countC7']}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is7dayavg')>-1">{{(row['count7'] / 7).toFixed(3)}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{(row['countC7'] / 7).toFixed(3)}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is30daysum')>-1">{{row['count30']}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{row['countC30']}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is30dayavg')>-1">{{(row['count30'] / 30).toFixed(3)}}
                <span *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{(row['countC30'] / 30).toFixed(3)}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is90daysum')>-1">{{row['count90']}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{row['countC90']}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is90dayavg')>-1">{{(row['count90'] / 90).toFixed(3)}}
                <span *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{(row['countC90'] / 90).toFixed(3)}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('isytdsum')>-1">{{row['countYTD']}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{row['countCYTD']}}</small></span>
              </td>

              <td *ngIf="selectValue.indexOf('isytdavg')>-1">{{(row['countYTD'] / row['diffDays']).toFixed(3)}}
                <span *ngIf="selectValue.indexOf('iscompare')>-1"> /
                    <small>{{(row['countCYTD'] / row['diffDays']).toFixed(3)}}</small></span>
              </td>
            </tr>
            <tr *ngIf="!data || data.length==0">
              <td>No data exists!</td>
            </tr>
            <tr>
              <td colspan="3"><p class="text-center">Total</p></td>
              <td *ngIf="selectValue.indexOf('is1daysum')>-1">{{totals['count1']}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{totals['countC1']}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is1dayavg')>-1">{{totals['count1'] / 1}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{totals['countC1'] / 1}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is7daysum')>-1">{{totals['count7']}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{totals['countC7']}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is7dayavg')>-1">{{(totals['count7'] / 7).toFixed(3)}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{(totals['countC7'] / 7).toFixed(3)}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is30daysum')>-1">{{totals['count30']}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{totals['countC30']}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is30dayavg')>-1">{{(totals['count30'] / 30).toFixed(3)}}
                <span *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{(totals['countC30'] / 30).toFixed(3)}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is90daysum')>-1">{{totals['count90']}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{totals['countC90']}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('is90dayavg')>-1">{{(totals['count90'] / 90).toFixed(3)}}
                <span *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{(totals['countC90'] / 90).toFixed(3)}}</small></span>
              </td>
              <td *ngIf="selectValue.indexOf('isytdsum')>-1">{{totals['countYTD']}}<span
                *ngIf="selectValue.indexOf('iscompare')>-1"> / <small>{{totals['countCYTD']}}</small></span>
              </td>

              <td *ngIf="selectValue.indexOf('isytdavg')>-1">{{(totals['countYTD'] / totals['diffDays']).toFixed(3)}}
                <span *ngIf="selectValue.indexOf('iscompare')>-1"> /
                    <small>{{(totals['countCYTD'] / totals['diffDays']).toFixed(3)}}</small></span>
              </td>
            </tr>
            </tbody>
            <!--Table body-->
          </table>
          <!--Table-->
        </div>
      </div>
    </mdb-card>
  </div>
<button mdbBtn type="button" color="mdb-color" size="md" class="showDashboard" *ngIf="isMobile" (click)="showDashboard()" mdbWavesEffect><mdb-icon fas icon="toggle-on"></mdb-icon></button>
